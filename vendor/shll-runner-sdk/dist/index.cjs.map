{"version":3,"sources":["../src/index.ts","../src/modules/ChainReader.ts","../src/modules/TransactionBuilder.ts","../src/modules/DecisionLogger.ts","../src/modules/PolicySimulator.ts"],"sourcesContent":["export * from \"./types/runner.js\";\r\nexport * from \"./types/trace.js\";\r\nexport * from \"./modules/ChainReader.js\";\r\nexport * from \"./modules/TransactionBuilder.js\";\r\nexport * from \"./modules/DecisionLogger.js\";\r\nexport * from \"./modules/PolicySimulator.js\";\r\n","import {\r\n    createPublicClient,\r\n    http,\r\n    keccak256,\r\n    toHex,\r\n    type Address,\r\n    type Hex,\r\n    type PublicClient,\r\n} from \"viem\";\r\n\r\nexport interface Observation {\r\n    tokenId: bigint;\r\n    agentState: {\r\n        balance: bigint;\r\n        status: number;\r\n        owner: Address;\r\n        logicAddress: Address;\r\n        lastActionTimestamp: bigint;\r\n    };\r\n    agentAccount: Address;\r\n    renter: Address;\r\n    renterExpires: bigint;\r\n    operator: Address;\r\n    operatorExpires: bigint;\r\n    blockNumber: bigint;\r\n    blockTimestamp: bigint;\r\n    timestamp: number;\r\n}\r\n\r\nexport interface ChainReaderConfig {\r\n    rpcUrl: string;\r\n    agentNfaAddress: Address;\r\n    rpcTimeoutMs?: number;\r\n    rpcRetryCount?: number;\r\n    /** Additional agent type strings to recognize beyond the built-in ones */\r\n    customAgentTypes?: string[];\r\n}\r\n\r\n// Built-in agent types — must match AgentNFA.sol TYPE_* constants\r\nconst DEFAULT_KNOWN_TYPES = [\"llm_trader\", \"llm_defi\", \"hot_token\", \"simple_dca\", \"smart_dca\"];\r\n\r\n// Minimal ABI required for ChainReader to observe AgentNFA state\r\nexport const MinimalAgentNFAAbi = [\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"getState\",\r\n        \"outputs\": [{\r\n            \"components\": [\r\n                { \"internalType\": \"uint256\", \"name\": \"balance\", \"type\": \"uint256\" },\r\n                { \"internalType\": \"enum AgentNFA.AgentStatus\", \"name\": \"status\", \"type\": \"uint8\" },\r\n                { \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" },\r\n                { \"internalType\": \"address\", \"name\": \"logicAddress\", \"type\": \"address\" },\r\n                { \"internalType\": \"uint256\", \"name\": \"lastActionTimestamp\", \"type\": \"uint256\" }\r\n            ],\r\n            \"internalType\": \"struct AgentNFA.AgentState\",\r\n            \"name\": \"\",\r\n            \"type\": \"tuple\"\r\n        }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"accountOf\",\r\n        \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"userOf\",\r\n        \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"userExpires\",\r\n        \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"operatorOf\",\r\n        \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"operatorExpiresOf\",\r\n        \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"operatorNonceOf\",\r\n        \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    // ... Read methods ...\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"agentType\",\r\n        \"outputs\": [{ \"internalType\": \"bytes32\", \"name\": \"\", \"type\": \"bytes32\" }],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n\r\n    // Write methods\r\n    {\r\n        \"inputs\": [\r\n            { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" },\r\n            {\r\n                \"components\": [\r\n                    { \"internalType\": \"address\", \"name\": \"target\", \"type\": \"address\" },\r\n                    { \"internalType\": \"uint256\", \"name\": \"value\", \"type\": \"uint256\" },\r\n                    { \"internalType\": \"bytes\", \"name\": \"data\", \"type\": \"bytes\" }\r\n                ],\r\n                \"internalType\": \"struct AgentNFA.ActionPayload\",\r\n                \"name\": \"action\",\r\n                \"type\": \"tuple\"\r\n            }\r\n        ],\r\n        \"name\": \"execute\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"components\": [\r\n                    { \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" },\r\n                    { \"internalType\": \"address\", \"name\": \"renter\", \"type\": \"address\" },\r\n                    { \"internalType\": \"address\", \"name\": \"operator\", \"type\": \"address\" },\r\n                    { \"internalType\": \"uint256\", \"name\": \"expires\", \"type\": \"uint256\" },\r\n                    { \"internalType\": \"uint256\", \"name\": \"nonce\", \"type\": \"uint256\" },\r\n                    { \"internalType\": \"uint256\", \"name\": \"deadline\", \"type\": \"uint256\" }\r\n                ],\r\n                \"internalType\": \"struct NativeSigner.EnableRequest\",\r\n                \"name\": \"req\",\r\n                \"type\": \"tuple\"\r\n            },\r\n            { \"internalType\": \"bytes\", \"name\": \"signature\", \"type\": \"bytes\" }\r\n        ],\r\n        \"name\": \"setOperatorWithSig\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"tokenId\", \"type\": \"uint256\" }],\r\n        \"name\": \"clearOperator\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    }\r\n] as const;\r\n\r\n/**\r\n * Common ChainReader extracted from SHLL architecture.\r\n * Facilitates reading agent ownership, lease times, and operator permits\r\n * from the standard AgentNFA contract.\r\n */\r\nexport class ChainReader {\r\n    public readonly publicClient: PublicClient;\r\n    private readonly agentNfaAddress: Address;\r\n    private readonly agentTypeMap: Record<string, string>;\r\n\r\n    constructor(config: ChainReaderConfig) {\r\n        this.agentNfaAddress = config.agentNfaAddress;\r\n\r\n        const transport = http(config.rpcUrl, {\r\n            timeout: config.rpcTimeoutMs ?? 30000,\r\n            retryCount: config.rpcRetryCount ?? 3,\r\n        });\r\n\r\n        this.publicClient = createPublicClient({\r\n            transport,\r\n        });\r\n\r\n        // Build type map once at construction\r\n        const allTypes = [...DEFAULT_KNOWN_TYPES, ...(config.customAgentTypes ?? [])];\r\n        this.agentTypeMap = Object.fromEntries(\r\n            allTypes.map((t) => [keccak256(toHex(t)), t]),\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Get a comprehensive snapshot of the agent's current on-chain state\r\n     */\r\n    async observe(tokenId: bigint): Promise<Observation> {\r\n        const [\r\n            agentState,\r\n            agentAccount,\r\n            renter,\r\n            renterExpires,\r\n            operator,\r\n            operatorExpires,\r\n            block,\r\n        ] = await Promise.all([\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"getState\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"accountOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"userOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"userExpires\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"operatorOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"operatorExpiresOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.getBlock(),\r\n        ]);\r\n\r\n        return {\r\n            tokenId,\r\n            agentState: agentState as unknown as Observation[\"agentState\"],\r\n            agentAccount: agentAccount as Address,\r\n            renter: renter as Address,\r\n            renterExpires: renterExpires as bigint,\r\n            operator: operator as Address,\r\n            operatorExpires: operatorExpires as bigint,\r\n            blockNumber: block.number,\r\n            blockTimestamp: block.timestamp,\r\n            timestamp: Date.now(),\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Read just the operational limits of the agent (operator / lease state)\r\n     */\r\n    async readStatus(tokenId: bigint): Promise<{\r\n        onchainOperator: Address;\r\n        operatorExpires: bigint;\r\n        renter: Address;\r\n        renterExpires: bigint;\r\n        operatorNonce: bigint;\r\n    }> {\r\n        const [\r\n            onchainOperator,\r\n            operatorExpires,\r\n            renter,\r\n            renterExpires,\r\n            operatorNonce,\r\n        ] = await Promise.all([\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"operatorOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"operatorExpiresOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"userOf\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"userExpires\",\r\n                args: [tokenId],\r\n            }),\r\n            this.publicClient.readContract({\r\n                address: this.agentNfaAddress,\r\n                abi: MinimalAgentNFAAbi,\r\n                functionName: \"operatorNonceOf\",\r\n                args: [tokenId],\r\n            }),\r\n        ]);\r\n\r\n        return {\r\n            onchainOperator: onchainOperator as Address,\r\n            operatorExpires: operatorExpires as bigint,\r\n            renter: renter as Address,\r\n            renterExpires: renterExpires as bigint,\r\n            operatorNonce: operatorNonce as bigint,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Reads the agentType (bytes32) and maps it back to a human-readable string.\r\n     */\r\n    async readAgentType(tokenId: bigint): Promise<string> {\r\n        const raw = await this.publicClient.readContract({\r\n            address: this.agentNfaAddress,\r\n            abi: MinimalAgentNFAAbi,\r\n            functionName: \"agentType\",\r\n            args: [tokenId],\r\n        });\r\n        const hex = (raw as string).toLowerCase();\r\n        return this.agentTypeMap[hex] ?? \"unknown\";\r\n    }\r\n}\r\n","import {\r\n    createPublicClient,\r\n    createWalletClient,\r\n    http,\r\n    type Address,\r\n    type Hex,\r\n    type PublicClient,\r\n    type WalletClient,\r\n} from \"viem\";\r\nimport { privateKeyToAccount } from \"viem/accounts\";\r\nimport { MinimalAgentNFAAbi } from \"./ChainReader.js\";\r\n\r\nexport interface TransactionBuilderConfig {\r\n    rpcUrl: string;\r\n    operatorPrivateKey: Hex;\r\n    agentNfaAddress: Address;\r\n}\r\n\r\nexport interface ActionPayload {\r\n    target: Address;\r\n    value: bigint;\r\n    data: Hex;\r\n}\r\n\r\nexport interface ActionResult {\r\n    hash: Hex;\r\n}\r\n\r\nexport interface NormalizedPermit {\r\n    tokenId: bigint;\r\n    renter: Address;\r\n    operator: Address;\r\n    expires: bigint;\r\n    nonce: bigint;\r\n    deadline: bigint;\r\n}\r\n\r\n/**\r\n * Common TransactionBuilder extracted from SHLL architecture.\r\n * Facilitates executing actions and managing operator permits on-chain.\r\n */\r\nexport class TransactionBuilder {\r\n    public readonly walletClient: WalletClient;\r\n    public readonly accountAddress: Address;\r\n    private readonly agentNfaAddress: Address;\r\n    private readonly publicClient: PublicClient;\r\n\r\n    constructor(config: TransactionBuilderConfig) {\r\n        this.agentNfaAddress = config.agentNfaAddress;\r\n\r\n        const account = privateKeyToAccount(config.operatorPrivateKey);\r\n        this.accountAddress = account.address;\r\n\r\n        const transport = http(config.rpcUrl);\r\n        this.publicClient = createPublicClient({ transport });\r\n        this.walletClient = createWalletClient({\r\n            transport,\r\n            account,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Executes an action on behalf of the agent's token ID.\r\n     * Simulates first, then broadcasts.\r\n     */\r\n    async executeAction(\r\n        tokenId: bigint,\r\n        action: ActionPayload\r\n    ): Promise<ActionResult> {\r\n        const simulation = await this.publicClient.simulateContract({\r\n            address: this.agentNfaAddress,\r\n            abi: MinimalAgentNFAAbi,\r\n            functionName: \"execute\",\r\n            args: [tokenId, action] as any,\r\n            account: this.walletClient.account!,\r\n        } as any);\r\n\r\n        const hash = await this.walletClient.writeContract(simulation.request as any);\r\n        return { hash };\r\n    }\r\n\r\n    /**\r\n     * Updates an operator permit on-chain using an EIP-712 signature\r\n     */\r\n    async enableOperatorWithPermit(\r\n        permit: NormalizedPermit,\r\n        sig: Hex\r\n    ): Promise<ActionResult> {\r\n        const simulation = await this.publicClient.simulateContract({\r\n            address: this.agentNfaAddress,\r\n            abi: MinimalAgentNFAAbi,\r\n            functionName: \"setOperatorWithSig\",\r\n            args: [\r\n                {\r\n                    tokenId: permit.tokenId,\r\n                    renter: permit.renter,\r\n                    operator: permit.operator,\r\n                    expires: permit.expires,\r\n                    nonce: permit.nonce,\r\n                    deadline: permit.deadline,\r\n                },\r\n                sig,\r\n            ] as any,\r\n            account: this.walletClient.account!,\r\n        } as any);\r\n\r\n        const hash = await this.walletClient.writeContract(simulation.request as any);\r\n        return { hash };\r\n    }\r\n\r\n    /**\r\n     * Clears the operator permit on-chain\r\n     */\r\n    async clearOperator(tokenId: bigint): Promise<ActionResult> {\r\n        const simulation = await this.publicClient.simulateContract({\r\n            address: this.agentNfaAddress,\r\n            abi: MinimalAgentNFAAbi,\r\n            functionName: \"clearOperator\",\r\n            args: [tokenId] as any,\r\n            account: this.walletClient.account!,\r\n        } as any);\r\n\r\n        const hash = await this.walletClient.writeContract(simulation.request as any);\r\n        return { hash };\r\n    }\r\n}\r\n","export interface DecisionLogEntry {\r\n    tokenId: bigint;\r\n    action: string;\r\n    reasoning: string;\r\n    blocked: boolean;\r\n    blockReason?: string;\r\n    timestampMs: number;\r\n    meta?: Record<string, unknown>;\r\n}\r\n\r\nexport interface IDecisionLogger {\r\n    logDecision(entry: DecisionLogEntry): void;\r\n}\r\n\r\n/**\r\n * Common DecisionLogger extracted from SHLL architecture.\r\n * Formats and outputs LLM reasoning logs consistently.\r\n */\r\nexport class DecisionLogger implements IDecisionLogger {\r\n    private readonly label: string;\r\n\r\n    constructor(label: string = \"AgentRunner\") {\r\n        this.label = label;\r\n    }\r\n\r\n    logDecision(entry: DecisionLogEntry): void {\r\n        const time = new Date(entry.timestampMs).toISOString();\r\n        const prefix = `[${this.label}][${entry.tokenId.toString()}][${time}] ${entry.action.toUpperCase()}`;\r\n\r\n        if (entry.blocked) {\r\n            console.warn(`${prefix} (BLOCKED: ${entry.blockReason ?? \"unknown reason\"}): ${entry.reasoning}`);\r\n        } else {\r\n            console.info(`${prefix}: ${entry.reasoning}`);\r\n        }\r\n    }\r\n}\r\n","import type { Address, PublicClient } from \"viem\";\r\nimport type { ActionPayload } from \"./TransactionBuilder.js\";\r\n\r\n/** Minimal ABI for PolicyGuardV4.validate — must match contract signature */\r\nconst POLICY_GUARD_V4_VALIDATE_ABI = [\r\n    {\r\n        name: \"validate\",\r\n        type: \"function\",\r\n        stateMutability: \"view\",\r\n        inputs: [\r\n            { name: \"nfa\", type: \"address\" },\r\n            { name: \"tokenId\", type: \"uint256\" },\r\n            { name: \"agentAccount\", type: \"address\" },\r\n            { name: \"caller\", type: \"address\" },\r\n            {\r\n                name: \"action\",\r\n                type: \"tuple\",\r\n                components: [\r\n                    { name: \"target\", type: \"address\" },\r\n                    { name: \"value\", type: \"uint256\" },\r\n                    { name: \"data\", type: \"bytes\" },\r\n                ],\r\n            },\r\n        ],\r\n        outputs: [\r\n            { name: \"ok\", type: \"bool\" },\r\n            { name: \"reason\", type: \"string\" },\r\n        ],\r\n    },\r\n] as const;\r\n\r\nexport interface PolicySimulatorConfig {\r\n    publicClient: PublicClient;\r\n    policyGuardV4Address: Address;\r\n    operatorAddress: Address;\r\n    agentNfaAddress: Address;\r\n}\r\n\r\nexport interface SimulationResult {\r\n    ok: boolean;\r\n    reason?: string;\r\n}\r\n\r\n/**\r\n * Common PolicySimulator extracted from SHLL architecture.\r\n * Safely simulates SHLL PolicyGuard validation off-chain to prevent reverts.\r\n */\r\nexport class PolicySimulator {\r\n    private readonly config: PolicySimulatorConfig;\r\n\r\n    constructor(config: PolicySimulatorConfig) {\r\n        this.config = config;\r\n    }\r\n\r\n    /**\r\n     * Simulates the policy evaluation that would happen automatically on-chain \r\n     * when calling AgentNFA.execute().\r\n     * If this fails, the action should not be attempted as it will revert.\r\n     */\r\n    async simulateAction(\r\n        tokenId: bigint,\r\n        vaultAddress: Address,\r\n        action: ActionPayload\r\n    ): Promise<SimulationResult> {\r\n        // Skip if no guard address configured (e.g. testing)\r\n        if (!this.config.policyGuardV4Address || this.config.policyGuardV4Address === \"0x0000000000000000000000000000000000000000\") {\r\n            return { ok: true };\r\n        }\r\n\r\n        try {\r\n            const [ok, reason] = await this.config.publicClient.readContract({\r\n                address: this.config.policyGuardV4Address,\r\n                abi: POLICY_GUARD_V4_VALIDATE_ABI,\r\n                functionName: \"validate\",\r\n                args: [\r\n                    this.config.agentNfaAddress,\r\n                    tokenId,\r\n                    vaultAddress,\r\n                    this.config.operatorAddress,\r\n                    {\r\n                        target: action.target,\r\n                        value: action.value,\r\n                        data: action.data,\r\n                    },\r\n                ],\r\n            }) as [boolean, string];\r\n\r\n            return { ok, reason: reason || undefined };\r\n        } catch (error) {\r\n            // Reversions happen inside the readContract when validation internally asserts false\r\n            const message = error instanceof Error ? error.message : \"Simulation reverted\";\r\n            return { ok: false, reason: `Simulation reverted: ${message.slice(0, 200)}` };\r\n        }\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,kBAQO;AA+BP,IAAM,sBAAsB,CAAC,cAAc,YAAY,aAAa,cAAc,WAAW;AAGtF,IAAM,qBAAqB;AAAA,EAC9B;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC;AAAA,MACR,cAAc;AAAA,QACV,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU;AAAA,QAClE,EAAE,gBAAgB,6BAA6B,QAAQ,UAAU,QAAQ,QAAQ;AAAA,QACjF,EAAE,gBAAgB,WAAW,QAAQ,SAAS,QAAQ,UAAU;AAAA,QAChE,EAAE,gBAAgB,WAAW,QAAQ,gBAAgB,QAAQ,UAAU;AAAA,QACvE,EAAE,gBAAgB,WAAW,QAAQ,uBAAuB,QAAQ,UAAU;AAAA,MAClF;AAAA,MACA,gBAAgB;AAAA,MAChB,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAC;AAAA,IACD,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA;AAAA,EAEA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC,EAAE,gBAAgB,WAAW,QAAQ,IAAI,QAAQ,UAAU,CAAC;AAAA,IACxE,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA;AAAA,EAGA;AAAA,IACI,UAAU;AAAA,MACN,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU;AAAA,MAClE;AAAA,QACI,cAAc;AAAA,UACV,EAAE,gBAAgB,WAAW,QAAQ,UAAU,QAAQ,UAAU;AAAA,UACjE,EAAE,gBAAgB,WAAW,QAAQ,SAAS,QAAQ,UAAU;AAAA,UAChE,EAAE,gBAAgB,SAAS,QAAQ,QAAQ,QAAQ,QAAQ;AAAA,QAC/D;AAAA,QACA,gBAAgB;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ;AAAA,MACZ;AAAA,IACJ;AAAA,IACA,QAAQ;AAAA,IACR,WAAW,CAAC;AAAA,IACZ,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU;AAAA,MACN;AAAA,QACI,cAAc;AAAA,UACV,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU;AAAA,UAClE,EAAE,gBAAgB,WAAW,QAAQ,UAAU,QAAQ,UAAU;AAAA,UACjE,EAAE,gBAAgB,WAAW,QAAQ,YAAY,QAAQ,UAAU;AAAA,UACnE,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU;AAAA,UAClE,EAAE,gBAAgB,WAAW,QAAQ,SAAS,QAAQ,UAAU;AAAA,UAChE,EAAE,gBAAgB,WAAW,QAAQ,YAAY,QAAQ,UAAU;AAAA,QACvE;AAAA,QACA,gBAAgB;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ;AAAA,MACZ;AAAA,MACA,EAAE,gBAAgB,SAAS,QAAQ,aAAa,QAAQ,QAAQ;AAAA,IACpE;AAAA,IACA,QAAQ;AAAA,IACR,WAAW,CAAC;AAAA,IACZ,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AAAA,EACA;AAAA,IACI,UAAU,CAAC,EAAE,gBAAgB,WAAW,QAAQ,WAAW,QAAQ,UAAU,CAAC;AAAA,IAC9E,QAAQ;AAAA,IACR,WAAW,CAAC;AAAA,IACZ,mBAAmB;AAAA,IACnB,QAAQ;AAAA,EACZ;AACJ;AAOO,IAAM,cAAN,MAAkB;AAAA,EACL;AAAA,EACC;AAAA,EACA;AAAA,EAEjB,YAAY,QAA2B;AACnC,SAAK,kBAAkB,OAAO;AAE9B,UAAM,gBAAY,kBAAK,OAAO,QAAQ;AAAA,MAClC,SAAS,OAAO,gBAAgB;AAAA,MAChC,YAAY,OAAO,iBAAiB;AAAA,IACxC,CAAC;AAED,SAAK,mBAAe,gCAAmB;AAAA,MACnC;AAAA,IACJ,CAAC;AAGD,UAAM,WAAW,CAAC,GAAG,qBAAqB,GAAI,OAAO,oBAAoB,CAAC,CAAE;AAC5E,SAAK,eAAe,OAAO;AAAA,MACvB,SAAS,IAAI,CAAC,MAAM,KAAC,2BAAU,mBAAM,CAAC,CAAC,GAAG,CAAC,CAAC;AAAA,IAChD;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,QAAQ,SAAuC;AACjD,UAAM;AAAA,MACF;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ,IAAI,MAAM,QAAQ,IAAI;AAAA,MAClB,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,SAAS;AAAA,IAC/B,CAAC;AAED,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,aAAa,MAAM;AAAA,MACnB,gBAAgB,MAAM;AAAA,MACtB,WAAW,KAAK,IAAI;AAAA,IACxB;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,WAAW,SAMd;AACC,UAAM;AAAA,MACF;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ,IAAI,MAAM,QAAQ,IAAI;AAAA,MAClB,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,MACD,KAAK,aAAa,aAAa;AAAA,QAC3B,SAAS,KAAK;AAAA,QACd,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM,CAAC,OAAO;AAAA,MAClB,CAAC;AAAA,IACL,CAAC;AAED,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,cAAc,SAAkC;AAClD,UAAM,MAAM,MAAM,KAAK,aAAa,aAAa;AAAA,MAC7C,SAAS,KAAK;AAAA,MACd,KAAK;AAAA,MACL,cAAc;AAAA,MACd,MAAM,CAAC,OAAO;AAAA,IAClB,CAAC;AACD,UAAM,MAAO,IAAe,YAAY;AACxC,WAAO,KAAK,aAAa,GAAG,KAAK;AAAA,EACrC;AACJ;;;ACzUA,IAAAA,eAQO;AACP,sBAAoC;AAgC7B,IAAM,qBAAN,MAAyB;AAAA,EACZ;AAAA,EACA;AAAA,EACC;AAAA,EACA;AAAA,EAEjB,YAAY,QAAkC;AAC1C,SAAK,kBAAkB,OAAO;AAE9B,UAAM,cAAU,qCAAoB,OAAO,kBAAkB;AAC7D,SAAK,iBAAiB,QAAQ;AAE9B,UAAM,gBAAY,mBAAK,OAAO,MAAM;AACpC,SAAK,mBAAe,iCAAmB,EAAE,UAAU,CAAC;AACpD,SAAK,mBAAe,iCAAmB;AAAA,MACnC;AAAA,MACA;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,cACF,SACA,QACqB;AACrB,UAAM,aAAa,MAAM,KAAK,aAAa,iBAAiB;AAAA,MACxD,SAAS,KAAK;AAAA,MACd,KAAK;AAAA,MACL,cAAc;AAAA,MACd,MAAM,CAAC,SAAS,MAAM;AAAA,MACtB,SAAS,KAAK,aAAa;AAAA,IAC/B,CAAQ;AAER,UAAM,OAAO,MAAM,KAAK,aAAa,cAAc,WAAW,OAAc;AAC5E,WAAO,EAAE,KAAK;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,yBACF,QACA,KACqB;AACrB,UAAM,aAAa,MAAM,KAAK,aAAa,iBAAiB;AAAA,MACxD,SAAS,KAAK;AAAA,MACd,KAAK;AAAA,MACL,cAAc;AAAA,MACd,MAAM;AAAA,QACF;AAAA,UACI,SAAS,OAAO;AAAA,UAChB,QAAQ,OAAO;AAAA,UACf,UAAU,OAAO;AAAA,UACjB,SAAS,OAAO;AAAA,UAChB,OAAO,OAAO;AAAA,UACd,UAAU,OAAO;AAAA,QACrB;AAAA,QACA;AAAA,MACJ;AAAA,MACA,SAAS,KAAK,aAAa;AAAA,IAC/B,CAAQ;AAER,UAAM,OAAO,MAAM,KAAK,aAAa,cAAc,WAAW,OAAc;AAC5E,WAAO,EAAE,KAAK;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,cAAc,SAAwC;AACxD,UAAM,aAAa,MAAM,KAAK,aAAa,iBAAiB;AAAA,MACxD,SAAS,KAAK;AAAA,MACd,KAAK;AAAA,MACL,cAAc;AAAA,MACd,MAAM,CAAC,OAAO;AAAA,MACd,SAAS,KAAK,aAAa;AAAA,IAC/B,CAAQ;AAER,UAAM,OAAO,MAAM,KAAK,aAAa,cAAc,WAAW,OAAc;AAC5E,WAAO,EAAE,KAAK;AAAA,EAClB;AACJ;;;AC3GO,IAAM,iBAAN,MAAgD;AAAA,EAClC;AAAA,EAEjB,YAAY,QAAgB,eAAe;AACvC,SAAK,QAAQ;AAAA,EACjB;AAAA,EAEA,YAAY,OAA+B;AACvC,UAAM,OAAO,IAAI,KAAK,MAAM,WAAW,EAAE,YAAY;AACrD,UAAM,SAAS,IAAI,KAAK,KAAK,KAAK,MAAM,QAAQ,SAAS,CAAC,KAAK,IAAI,KAAK,MAAM,OAAO,YAAY,CAAC;AAElG,QAAI,MAAM,SAAS;AACf,cAAQ,KAAK,GAAG,MAAM,cAAc,MAAM,eAAe,gBAAgB,MAAM,MAAM,SAAS,EAAE;AAAA,IACpG,OAAO;AACH,cAAQ,KAAK,GAAG,MAAM,KAAK,MAAM,SAAS,EAAE;AAAA,IAChD;AAAA,EACJ;AACJ;;;AC/BA,IAAM,+BAA+B;AAAA,EACjC;AAAA,IACI,MAAM;AAAA,IACN,MAAM;AAAA,IACN,iBAAiB;AAAA,IACjB,QAAQ;AAAA,MACJ,EAAE,MAAM,OAAO,MAAM,UAAU;AAAA,MAC/B,EAAE,MAAM,WAAW,MAAM,UAAU;AAAA,MACnC,EAAE,MAAM,gBAAgB,MAAM,UAAU;AAAA,MACxC,EAAE,MAAM,UAAU,MAAM,UAAU;AAAA,MAClC;AAAA,QACI,MAAM;AAAA,QACN,MAAM;AAAA,QACN,YAAY;AAAA,UACR,EAAE,MAAM,UAAU,MAAM,UAAU;AAAA,UAClC,EAAE,MAAM,SAAS,MAAM,UAAU;AAAA,UACjC,EAAE,MAAM,QAAQ,MAAM,QAAQ;AAAA,QAClC;AAAA,MACJ;AAAA,IACJ;AAAA,IACA,SAAS;AAAA,MACL,EAAE,MAAM,MAAM,MAAM,OAAO;AAAA,MAC3B,EAAE,MAAM,UAAU,MAAM,SAAS;AAAA,IACrC;AAAA,EACJ;AACJ;AAkBO,IAAM,kBAAN,MAAsB;AAAA,EACR;AAAA,EAEjB,YAAY,QAA+B;AACvC,SAAK,SAAS;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,MAAM,eACF,SACA,cACA,QACyB;AAEzB,QAAI,CAAC,KAAK,OAAO,wBAAwB,KAAK,OAAO,yBAAyB,8CAA8C;AACxH,aAAO,EAAE,IAAI,KAAK;AAAA,IACtB;AAEA,QAAI;AACA,YAAM,CAAC,IAAI,MAAM,IAAI,MAAM,KAAK,OAAO,aAAa,aAAa;AAAA,QAC7D,SAAS,KAAK,OAAO;AAAA,QACrB,KAAK;AAAA,QACL,cAAc;AAAA,QACd,MAAM;AAAA,UACF,KAAK,OAAO;AAAA,UACZ;AAAA,UACA;AAAA,UACA,KAAK,OAAO;AAAA,UACZ;AAAA,YACI,QAAQ,OAAO;AAAA,YACf,OAAO,OAAO;AAAA,YACd,MAAM,OAAO;AAAA,UACjB;AAAA,QACJ;AAAA,MACJ,CAAC;AAED,aAAO,EAAE,IAAI,QAAQ,UAAU,OAAU;AAAA,IAC7C,SAAS,OAAO;AAEZ,YAAM,UAAU,iBAAiB,QAAQ,MAAM,UAAU;AACzD,aAAO,EAAE,IAAI,OAAO,QAAQ,wBAAwB,QAAQ,MAAM,GAAG,GAAG,CAAC,GAAG;AAAA,IAChF;AAAA,EACJ;AACJ;","names":["import_viem"]}